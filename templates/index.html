<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Voice Agent 🎙️</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="app">
      <div class="notification" id="notification" style="display: none">
        Audio saved successfully! ✅
      </div>
      <div class="left-sidebar" id="leftSidebar">
        <button
          class="close-btn glossy"
          id="closeLeftSidebar"
          aria-label="Close left sidebar"
        >
          Close
        </button>
        <button id="newChatBtn" class="new-chat-btn glossy">
          New Conversation ✨
        </button>
        <div class="upload-box glossy">
          <h2>Upload Knowledge Base 📂</h2>
          <form id="uploadForm" enctype="multipart/form-data">
            <input
              type="file"
              id="fileInput"
              name="file"
              accept=".pdf,.txt"
              class="upload-input"
            />
            <button type="submit" class="upload-btn glossy">Upload</button>
          </form>
        </div>
        <ul id="chatList" class="chat-list"></ul>
      </div>
      <div class="main-content">
        <div class="toggle-buttons">
          <button
            id="toggleLeftSidebar"
            class="toggle-btn glossy"
            aria-label="Open menu"
          >
            ☰ Menu
          </button>
          <button
            id="toggleRightSidebar"
            class="toggle-btn glossy"
            aria-label="Open history"
          >
            📜 History
          </button>
        </div>
        <div class="transcription-box">
          <h2>Current Conversation 📝</h2>
          <div id="transcription" class="transcription-content">
            <span class="spinner" style="display: none">⏳</span>
          </div>
          <div class="chat-input">
            <input
              type="text"
              id="chatInput"
              placeholder="Type your message or ask to search..."
              aria-label="Chat input"
            />
            <button
              id="sendBtn"
              class="send-btn glossy"
              aria-label="Send message"
            >
              Send
            </button>
            <button
              id="micBtn"
              class="mic-btn glossy circular"
              aria-label="Record audio"
            >
              🎤
            </button>
          </div>
        </div>
      </div>
      <div class="right-sidebar" id="rightSidebar">
        <button
          class="close-btn glossy"
          id="closeRightSidebar"
          aria-label="Close right sidebar"
        >
          ✖
        </button>
        <div class="navigation glossy">
          <a href="/" style="text-decoration: none" class="nav-btn homeBtn"
            >Home🏠</a
          >
          <button
            id="settingsBtn"
            class="nav-btn settings-btn glossy"
            aria-label="Settings"
          >
            ⚙️
          </button>
          <a
            href="/docu"
            style="text-decoration: none"
            id="docsBtn"
            class="nav-btn docsBtn glossy"
            >Docs📄</a
          >
        </div>
        <div class="chat-history-box">
          <h2>Conversation History 📜</h2>
          <div id="chatHistory" class="chat-history-content glossy">
            <span class="text">Loading chat history... ⏳</span>
          </div>
        </div>
        <div class="panel">
          <div id="status" class="status glossy">Status: Idle ⏳</div>
          <div id="connectionStatus" class="connection-status glossy">
            Connecting to server... 🔌
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="listeningModal" style="display: none">
      <div class="modal-content">
        <div class="voice-animation">
          <div class="pulse-circle"></div>
          <div class="ripple ripple1"></div>
          <div class="ripple ripple2"></div>
          <div class="ripple ripple3"></div>
        </div>
        <p>Listening...</p>
        <button
          id="stopListening"
          class="stop-btn glossy circular"
          aria-label="Stop listening"
        >
          Stop Listening
        </button>
      </div>
    </div>
    <script src="/static/index.js"></script>
    <script>
      // Toggle sidebars for small screens
      document
        .getElementById("toggleLeftSidebar")
        .addEventListener("click", () => {
          document.getElementById("leftSidebar").classList.toggle("active");
          document.getElementById("rightSidebar").classList.remove("active");
        });

      document
        .getElementById("toggleRightSidebar")
        .addEventListener("click", () => {
          document.getElementById("rightSidebar").classList.toggle("active");
          document.getElementById("leftSidebar").classList.remove("active");
        });

      document
        .getElementById("closeLeftSidebar")
        .addEventListener("click", () => {
          document.getElementById("leftSidebar").classList.remove("active");
        });

      document
        .getElementById("closeRightSidebar")
        .addEventListener("click", () => {
          document.getElementById("rightSidebar").classList.remove("active");
        });
    </script>
  </body>
</html>
